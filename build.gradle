ext {
    projectVersion = "v1.2.0"
}

apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'idea'

group = 'com.github.eMeS-Libraries'
sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    jcenter()
    flatDir {
        dirs 'lib'
    }
    maven { url "https://jitpack.io" }
}

dependencies {
    //This project itself
//    compile "com.github.eMeS-Libraries:eMeS_Libraries:${projectVersion}"

    //Other dependencies - libraries
    compile "commons-io:commons-io:+"
    compile "commons-codec:commons-codec:+"
    compile "org.apache.commons:commons-compress:1.9"
    compile group: 'log4j', name: 'log4j', version: '1.2.17'
    compile "mysql:mysql-connector-java:5.1.5"
    //Local libraries
    compile name: 'Native access Core (jna-4.2.2)'
    compile name: 'Native access for keyboard actions (jna-platform-4.2.2)'
    compile name: 'Oracle JDBC (ojdbc6)'

    //For tests:
    compile "junit:junit:4.12"
    testCompile "junit:junit:4.12"
}

//All the dealing with encoding
compileJava.options.encoding = 'UTF-8'
tasks.withType(JavaCompile) {options.encoding = 'UTF-8'}
tasks.withType(Javadoc) {options.encoding = 'UTF-8'}
test {systemProperty "file.encoding", "utf-8"}

task sourcesJar(type: Jar, dependsOn: classes) {
    classifier = 'sources'
    from sourceSets.main.allSource
}

task javadocJar(type: Jar, dependsOn: javadoc) {
    classifier = 'javadoc'
    from javadoc.destinationDir
}

artifacts {
    archives sourcesJar
    archives javadocJar
}